import axios from "axios";

// Interface for the joke object
export interface Joke {
  category: string;
  type: string;
  setup: string;
  delivery: string;
}

// Class to interact with the joke api
export class JokeAPI {
  private apiUrl: string = "https://sv443.net/jokeapi/v2/joke/Any";

  constructor() {}

  // Fetch a random joke from the api
  async getRandomJoke(category: string = "Any"): Promise<Joke> {
    try {
      const response = await axios.get(`${this.apiUrl}${category}`);

      const joke: Joke = {
        category: response.data.category,
        type: response.data.type,
        setup: response.data.setup,
        delivery: response.data.delivery,
      };

      return joke;
    } catch (error) {
      // Error Handling
      throw new Error(`Failed to fetch a joke: ${error}`);
    }
  }
}
